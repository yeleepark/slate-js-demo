"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{8256:function(e,t,r){r.d(t,{BU:function(){return eV},CX:function(){return eL},mH:function(){return eW},ui:function(){return eg}});var n=r(1190),a=r.n(n),i=r(7310),o=r.n(i),s=r(7065),l=r.n(s),c=r(2265),d=r(9056),u=r(6759),h=r(22),f=r(4048),p=r(4887);function v(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r){var n;return n=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===g(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(0,c.createContext)(null),k=()=>{var e=(0,c.useContext)(b);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},y=h.y2;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=function(){},x=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",O=h.TF?c.useLayoutEffect:c.useEffect,S=["node"];function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var P={subtree:!0,childList:!0,characterData:!0},M=h.wZ?e=>{var t,{node:r}=e,n=v(e,S);if(!h.wZ)return null;var a=k(),i=(t=(0,c.useRef)(!1),(0,c.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[o]=(0,c.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,i=null,o=null,s=null,l=0,c=!1,d=()=>{var e=h.Or.get(t);if(h.Or.delete(t),e){var{selection:r}=t,n=(0,h.o4)(t,e);!n||r&&u.e6.equals(n,r)||u.YR.select(t,n)}},f=()=>{var e=h.hc.get(t);if(h.hc.delete(t),e){if(e.at){var r=u.E9.isPoint(e.at)?(0,h.j0)(t,e.at):(0,h.o4)(t,e.at);if(!r)return;var n=u.ML.range(t,r);t.selection&&u.e6.equals(t.selection,n)||u.YR.select(t,r)}e.run()}},p=()=>{if(o&&(clearTimeout(o),o=null),s&&(clearTimeout(s),s=null),!k()&&!b()){d();return}a||(a=!0,setTimeout(()=>a=!1)),b()&&(a="action");var e=t.selection&&u.ML.rangeRef(t,t.selection,{affinity:"forward"});h.BX.set(t,t.marks),C("flush",h.hc.get(t),h.KZ.get(t));for(var i=k();l=null===(p=h.KZ.get(t))||void 0===p?void 0:p[0];){var l,p,v,g=h.Dk.get(t);void 0!==g&&(h.Dk.delete(t),t.marks=g),g&&!1===c&&(c=null);var m=(0,h.QY)(l);t.selection&&u.e6.equals(t.selection,m)||u.YR.select(t,m),l.diff.text?u.ML.insertText(t,l.diff.text):u.ML.deleteFragment(t),h.KZ.set(t,null===(v=h.KZ.get(t))||void 0===v?void 0:v.filter(e=>{var{id:t}=e;return t!==l.id})),(0,h.K9)(t,l)||(i=!1,h.hc.delete(t),h.BX.delete(t),a="action",h.Or.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var y=null==e?void 0:e.unref();if(!y||h.Or.get(t)||t.selection&&u.e6.equals(y,t.selection)||u.YR.select(t,y),b()){f();return}i&&r(),r.flush(),n.flush(),d();var w=h.BX.get(t);h.BX.delete(t),void 0!==w&&(t.marks=w,t.onChange())},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=h.Cl.get(t);if(r){if(k()||e){r.style.display="none";return}r.style.removeProperty("display")}},g=(e,r)=>{var n,a=null!==(n=h.KZ.get(t))&&void 0!==n?n:[];h.KZ.set(t,a);var i=u.NB.leaf(t,e),o=a.findIndex(t=>u.y$.equals(t.path,e));if(o<0){(0,h.ik)(i.text,r)&&a.push({path:e,diff:r,id:l++}),v();return}var s=(0,h.Qz)(i.text,a[o].diff,r);if(!s){a.splice(o,1),v();return}a[o]=E(E({},a[o]),{},{diff:s})},m=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c=!1,h.Or.delete(t),r.cancel(),n.cancel(),b()&&p(),h.hc.set(t,{at:a,run:e}),s=setTimeout(p)},b=()=>!!h.hc.get(t),k=()=>{var e;return!!(null!==(e=h.KZ.get(t))&&void 0!==e&&e.length)},w=e=>{h.Or.set(t,e),o&&(clearTimeout(o),o=null);var{selection:r}=t;if(e){var n=!r||!u.y$.equals(r.anchor.path,e.anchor.path),a=!r||!u.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&c||a)&&(c=!1),(n||k())&&(o=setTimeout(p,200))}},O=()=>{b()||(s=setTimeout(p))};return{flush:p,scheduleFlush:O,hasPendingDiffs:k,hasPendingAction:b,hasPendingChanges:()=>b()||k(),isFlushing:()=>a,handleUserSelect:w,handleCompositionEnd:e=>{i&&clearTimeout(i),i=setTimeout(()=>{h.ES.set(t,!1),p()},25)},handleCompositionStart:e=>{h.ES.set(t,!0),i&&(clearTimeout(i),i=null)},handleDOMBeforeInput:e=>{if(o&&(clearTimeout(o),o=null),!h.tw.get(t)){var{inputType:r}=e,n=null,a=e.dataTransfer||e.data||void 0;!1!==c&&"insertText"!==r&&"insertCompositionText"!==r&&(c=!1);var[i]=e.getTargetRanges();i&&(n=y.toSlateRange(t,i,{exactMatch:!1,suppressThrow:!0}));var s=y.getWindow(t).getSelection();if(!n&&s&&(i=s,n=y.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),n=null!==(T=n)&&void 0!==T?T:t.selection){var l=!0;if(r.startsWith("delete")){var d=r.endsWith("Backward")?"backward":"forward",[f,p]=u.e6.edges(n),[v,b]=u.ML.leaf(t,f.path);if(u.e6.isExpanded(n)&&v.text.length===f.offset&&0===p.offset){var k=u.ML.next(t,{at:f.path,match:u.xv.isText});k&&u.y$.equals(k[1],p.path)&&("backward"===d?(n={anchor:p,focus:p},f=p,[v,b]=k):(n={anchor:f,focus:f},p=f))}var C={text:"",start:f.offset,end:p.offset},S=h.KZ.get(t),L=null==S?void 0:S.find(e=>u.y$.equals(e.path,b)),P=L?[L.diff,C]:[C];if(0===(0,h.WV)(v.text,...P).length&&(l=!1),u.e6.isExpanded(n)){if(l&&u.y$.equals(n.anchor.path,n.focus.path)){var M={path:n.anchor.path,offset:f.offset};return w(u.ML.range(t,M,M)),g(n.anchor.path,{text:"",end:p.offset,start:f.offset})}return m(()=>u.ML.deleteFragment(t,{direction:d}),{at:n})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return m(()=>u.ML.deleteFragment(t),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:D}=n;if(l&&u.e6.isCollapsed(n)){var B=u.NB.leaf(t,D.path);if(D.offset<B.text.length)return g(D.path,{text:"",start:D.offset,end:D.offset+1})}return m(()=>u.ML.deleteForward(t),{at:n});case"deleteContentBackward":var T,R,{anchor:j}=n,I=(0,h.zq)(i)?i.isCollapsed:!!(null!==(R=i)&&void 0!==R&&R.collapsed);if(l&&I&&u.e6.isCollapsed(n)&&j.offset>0)return g(j.path,{text:"",start:j.offset-1,end:j.offset});return m(()=>u.ML.deleteBackward(t),{at:n});case"deleteEntireSoftLine":return m(()=>{u.ML.deleteBackward(t,{unit:"line"}),u.ML.deleteForward(t,{unit:"line"})},{at:n});case"deleteHardLineBackward":return m(()=>u.ML.deleteBackward(t,{unit:"block"}),{at:n});case"deleteSoftLineBackward":return m(()=>u.ML.deleteBackward(t,{unit:"line"}),{at:n});case"deleteHardLineForward":return m(()=>u.ML.deleteForward(t,{unit:"block"}),{at:n});case"deleteSoftLineForward":return m(()=>u.ML.deleteForward(t,{unit:"line"}),{at:n});case"deleteWordBackward":return m(()=>u.ML.deleteBackward(t,{unit:"word"}),{at:n});case"deleteWordForward":return m(()=>u.ML.deleteForward(t,{unit:"word"}),{at:n});case"insertLineBreak":return m(()=>u.ML.insertSoftBreak(t),{at:n});case"insertParagraph":return m(()=>u.ML.insertBreak(t),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(x(a))return m(()=>y.insertData(t,a),{at:n});var F=null!=a?a:"";if(h.Dk.get(t)&&(F=F.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(F)&&(F=F.slice(0,-1)),F.includes("\n"))return m(()=>{var e=F.split("\n");e.forEach((r,n)=>{r&&u.ML.insertText(t,r),n!==e.length-1&&u.ML.insertSoftBreak(t)})},{at:n});if(u.y$.equals(n.anchor.path,n.focus.path)){var[N,W]=u.e6.edges(n),V={start:N.offset,end:W.offset,text:F};if(F&&c&&"insertCompositionText"===r){var Y=c.start+c.text.search(/\S|$/);V.start+V.text.search(/\S|$/)===Y+1&&V.end===c.start+c.text.length?(V.start-=1,c=null,O()):c=!1}else c="insertText"===r&&(null===c?V:!!(c&&u.e6.isCollapsed(n))&&c.end+c.text.length===N.offset&&E(E({},c),{},{text:c.text+F}));if(l){var K=t.selection;if(g(N.path,V),K){var U={path:N.path,offset:N.offset+F.length};m(()=>{u.YR.select(t,{anchor:U,focus:U})},{at:U})}return}}return m(()=>u.ML.insertText(t,F),{at:n})}}}},handleKeyDown:e=>{k()||(v(!0),setTimeout(v))},handleDomMutations:e=>{if(!(k()||b())&&e.some(r=>(0,h.KW)(t,r,e))){var r;null===(r=h.Tr.get(t))||void 0===r||r()}},handleInput:()=>{(b()||!k())&&p()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:a},n)));return!function(e,t,r){var[n]=(0,c.useState)(()=>new MutationObserver(t));O(()=>{n.takeRecords()}),(0,c.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(r,o.handleDomMutations,P),h.Pr.set(a,o.scheduleFlush),i&&o.flush(),o}:()=>null;function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var B=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,i=k(),o=y.findPath(i,a),s=u.y$.parent(o),l=!!r[h.q8];return i.isVoid(n)?c.createElement(j,{length:u.NB.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||i.isInline(n)||""!==u.ML.string(i,s)?""===r.text?c.createElement(j,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?c.createElement(T,{isTrailing:!0,text:r.text}):c.createElement(T,{text:r.text}):c.createElement(j,{isLineBreak:!0,isMarkPlaceholder:l})},T=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,c.useRef)(null),a=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[i]=(0,c.useState)(a);return O(()=>{var e=a();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),c.createElement(R,{ref:n},i)},R=(0,c.memo)((0,c.forwardRef)((e,t)=>c.createElement("span",{"data-slate-string":!0,ref:t},e.children))),j=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),c.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a),h.wZ&&r?null:"\uFEFF",r?c.createElement("br",null):null)};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var N=h.wZ?300:0;function W(e){e.current&&(clearTimeout(e.current),e.current=null)}var V=e=>c.createElement(K,F({},e)),Y=c.memo(e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:i,renderLeaf:o=V,leafPosition:s}=e,l=k(),d=(0,c.useRef)(null),u=(0,c.useRef)(null),[p,v]=(0,c.useState)(!1),g=(0,c.useRef)(null),m=(0,c.useCallback)(e=>{if(r=null==e,d.current&&(d.current.disconnect(),r&&(d.current=null)),null==e)h.Cl.delete(l),null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,null);else{if(h.Cl.set(l,e),!d.current){var r,n,a=window.ResizeObserver||f.do;d.current=new a(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}d.current.observe(e),u.current=e}},[u,t,l]),b=c.createElement(B,{isLast:r,leaf:t,parent:a,text:n}),y=!!t[h.Ie];if((0,c.useEffect)(()=>(y?g.current||(g.current=setTimeout(()=>{v(!0),g.current=null},N)):(W(g),v(!1)),()=>W(g)),[y,v]),y&&p){var w={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:h.Wt?"inherit":void 0},contentEditable:!1,ref:m}};b=c.createElement(c.Fragment,null,b,i(w))}return o({attributes:{"data-slate-leaf":!0},children:b,leaf:t,text:n,leafPosition:s})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.xv.equals(t.leaf,e.leaf)&&t.leaf[h.Ie]===e.leaf[h.Ie]),K=e=>{var{attributes:t,children:r}=e;return c.createElement("span",F({},t),r)},U=(0,c.createContext)({}),A=(e,t)=>{var r=k(),{decorate:n,addEventListener:a}=(0,c.useContext)(U),[i,o]=function(e,t){var r,[,n]=(0,c.useReducer)(e=>e+1,0),a=(0,c.useRef)(),i=(0,c.useRef)(()=>null),o=(0,c.useRef)(null);try{if(e!==i.current||a.current){var s=e();r=t(o.current,s)?o.current:s}else r=o.current}catch(e){throw a.current&&e instanceof Error&&(e.message+="\nThe error may be correlated with this previous error:\n".concat(a.current.stack,"\n\n")),e}return i.current=e,o.current=r,a.current=void 0,[r,(0,c.useCallback)(()=>{try{var e=i.current();if(t(o.current,e))return;o.current=e}catch(e){e instanceof Error?a.current=e:a.current=Error(String(e))}n()},[])]}(()=>{var t=y.findPath(r,e);return n([e,t])},u.xv.isText(e)?h.Ft:h._e);return O(()=>{var e=a(o);return o(),e},[a,o]),(0,c.useMemo)(()=>[...i,...t],[i,t])},q=e=>{var t=(0,c.useRef)(new Set),r=(0,c.useRef)(e);O(()=>{r.current=e,t.current.forEach(e=>e())},[e]);var n=(0,c.useCallback)(e=>r.current(e),[]),a=(0,c.useCallback)(e=>(t.current.add(e),()=>{t.current.delete(e)}),[]);return(0,c.useMemo)(()=>({decorate:n,addEventListener:a}),[n,a])};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=e=>c.createElement(H,Z({},e)),$=c.memo(e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:i,renderText:o=_,text:s}=e,l=k(),d=(0,c.useRef)(null),f=A(s,t),p=u.xv.decorations(s,f),v=y.findKey(l,s),g=[],m=0;m<p.length;m++){var{leaf:b,position:w}=p[m];g.push(c.createElement(Y,{isLast:r&&m===p.length-1,key:"".concat(v.id,"-").concat(m),renderPlaceholder:a,leaf:b,leafPosition:w,text:s,parent:n,renderLeaf:i}))}var E=(0,c.useCallback)(e=>{var t=h.f7.get(l);e?(null==t||t.set(v,e),h.BE.set(s,e),h.EP.set(e,s)):(null==t||t.delete(v),h.BE.delete(s),d.current&&h.EP.delete(d.current)),d.current=e},[d,l,v,s]);return o({text:s,children:g,attributes:{"data-slate-node":"text",ref:E}})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&(0,h.Ft)(t.decorations,e.decorations)),H=e=>{var{attributes:t,children:r}=e;return c.createElement("span",Z({},t),r)};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Q=e=>c.createElement(ee,G({},e)),J=c.memo(e=>{var{decorations:t,element:r,renderElement:n=Q,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:l}=e,d=k(),f=ep(),p=d.isInline(r),v=A(r,t),g=y.findKey(d,r),m=(0,c.useCallback)(e=>{var t=h.f7.get(d);e?(null==t||t.set(g,e),h.BE.set(r,e),h.EP.set(e,r)):(null==t||t.delete(g),h.BE.delete(r))},[d,g,r]),b=eu({decorations:v,node:r,renderElement:n,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:l}),w={"data-slate-node":"element",ref:m};if(p&&(w["data-slate-inline"]=!0),!p&&u.ML.hasInlines(d,r)){var E=u.NB.string(r),C=a()(E);"rtl"===C&&(w.dir=C)}if(u.ML.isVoid(d,r)){w["data-slate-void"]=!0,!f&&p&&(w.contentEditable=!1);var[[x]]=u.NB.texts(r);b=c.createElement(p?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},c.createElement($,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:x})),h.l2.set(x,0),h.hf.set(x,r)}return n({attributes:w,children:b,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&(0,h._e)(e.decorations,t.decorations)),ee=e=>{var{attributes:t,children:r,element:n}=e,a=k().isInline(n)?"span":"div";return c.createElement(a,G(G({},t),{},{style:{position:"relative"}}),r)};class et{constructor(e,t){var{chunkSize:r,debug:n}=t;m(this,"root",void 0),m(this,"chunkSize",void 0),m(this,"debug",void 0),m(this,"reachedEnd",void 0),m(this,"pointerChunk",void 0),m(this,"pointerIndex",void 0),m(this,"pointerIndexStack",void 0),m(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=r,this.debug=null!=n&&n,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;){if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}if("root"===this.pointerChunk.type)return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;){if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}if("root"===this.pointerChunk.type){this.pointerIndex=-1;return}this.exitChunk()}this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(0!==e.length){for(var t=0,r=0;"chunk"===this.pointerChunk.type&&this.pointerIndex===this.pointerSiblings.length-1;){var n=Math.min(this.chunkSize-this.pointerSiblings.length,e.length);if(n>0){var a=e.splice(0,n);this.rawInsertAfter(a,t)}this.exitChunk(),t++}if(0!==e.length){var i=this.savePointer(),o=null;if(this.readLeaf())for(;"chunk"===this.pointerChunk.type&&0===this.pointerIndex;){var s=Math.min(this.chunkSize-this.pointerSiblings.length,e.length);if(s>0){var l=e.splice(-s,s);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(l,r),o||(o=this.savePointer())}this.exitChunk(),r++}this.restorePointer(i);var c=Math.max(t,r);this.rawInsertAfter(e,c),o&&this.restorePointer(o),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,0===this.pointerSiblings.length&&"chunk"===this.pointerChunk.type?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;"chunk"===e.type;e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return"root"===this.pointerChunk.type&&-1===this.pointerIndex}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||-1===this.pointerIndex?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(void 0!==this.cachedPointerNode)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var t=[],r=e;"chunk"===r.type;r=r.parent){var n=r.parent.children.indexOf(r);if(-1===n)return null;t.unshift(n)}return t}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if("start"===e){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:t,node:r}=e,n=t.children.indexOf(r);if(-1===n)throw Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(t);if(!a)throw Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=t,this.pointerIndex=n,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(e){var t;if((null===(t=this.pointerNode)||void 0===t?void 0:t.type)!=="chunk")throw Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),0===this.pointerChunk.children.length)throw Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;(null===(t=this.pointerNode)||void 0===t?void 0:t.type)==="chunk";){var t;this.enterChunk(e)}}exitChunk(){if("root"===this.pointerChunk.type)throw Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,t){if(0!==e.length){for(var r=(e,t,n)=>{if(1===n)return e;for(var a=[],i=0;i<this.chunkSize;i++){var o=e.slice(i*n,(i+1)*n);if(0===o.length)break;var s={type:"chunk",key:new h.sr,parent:t,children:[]};s.children=r(o,s,n/this.chunkSize),a.push(s)}return a},n=this.pointerSiblings.length+e.length,a=0,i=this.chunkSize;i<n;i*=this.chunkSize)a++;var o=Math.max(a,t),s=Math.pow(this.chunkSize,o),l=r(e,this.pointerChunk,s);this.pointerSiblings.splice(this.pointerIndex+1,0,...l),this.pointerIndex+=l.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=t=>{if("chunk"===t.type){var{parent:r,children:n}=t;if(!r.children.includes(t))throw Error("Debug: Chunk ".concat(t.key.id," has an incorrect parent property"));n.forEach(e)}};if(this.root.children.forEach(e),void 0!==this.cachedPointerNode&&this.cachedPointerNode!==this.getPointerNode())throw Error("Debug: The cached pointer is incorrect and has not been invalidated");var t=this.getChunkPath(this.pointerChunk);if(!t)throw Error("Debug: The pointer chunk is not connected to the root");if(!u.y$.equals(this.pointerIndexStack,t))throw Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(t.join(", "),"]"))}}}class er{constructor(e,t){m(this,"editor",void 0),m(this,"children",void 0),m(this,"cachedKeys",void 0),m(this,"pointerIndex",void 0),this.editor=e,this.children=t,this.cachedKeys=Array(t.length),this.pointerIndex=0}read(e){if(1===e)return[this.children[this.pointerIndex++]];var t=this.remaining(e);return this.pointerIndex+=e,t}remaining(e){return void 0===e?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,t){var r=this.children.indexOf(e,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var n=this.pointerIndex;n<this.children.length;n++){var a=this.children[n];if(this.findKey(a,n)===t)return n-this.pointerIndex}return -1}toChunkLeaves(e,t){return e.map((e,r)=>({type:"leaf",node:e,key:this.findKey(e,t+r),index:t+r}))}findKey(e,t){var r=this.cachedKeys[t];if(r)return r;var n=y.findKey(this.editor,e);return this.cachedKeys[t]=n,n}}var en=(e,t)=>{var r,{chunkTree:n,children:a,chunkSize:i,rerenderChildren:o=[],onInsert:s,onUpdate:l,onIndexChange:c,debug:d}=t;n.modifiedChunks.clear();for(var u=new et(n,{chunkSize:i,debug:d}),h=new er(e,a);r=u.readLeaf();)if(function(){var e=h.lookAhead(r.node,r.key),t=e>0&&n.movedNodeKeys.has(r.key);if(-1===e||t)return u.remove(),1;var a=h.pointerIndex,i=h.read(e+1),d=i.pop();if(i.length){var f=h.toChunkLeaves(i,a);u.insertBefore(f),i.forEach((e,t)=>{null==s||s(e,a+t)})}var p=h.pointerIndex-1;r.node!==d&&(r.node=d,u.invalidateChunk(),null==l||l(d,p)),r.index!==p&&(r.index=p,null==c||c(d,p)),o.includes(p)&&u.invalidateChunk()}())continue;if(!h.reachedEnd){var f=h.remaining(),p=h.toChunkLeaves(f,h.pointerIndex);u.returnToPreviousLeaf(),u.insertAfter(p),f.forEach((e,t)=>{null==s||s(e,h.pointerIndex+t)})}n.movedNodeKeys.clear()};function ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ei=new WeakMap,eo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=y.findKey(e,t),a=ei.get(n);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},ei.set(n,a)),r.reconcile&&en(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({chunkTree:a,children:t.children},r.reconcile)),a},es=e=>{var{children:t}=e;return t},el=e=>{var{root:t,ancestor:r,renderElement:n,renderChunk:a=es}=e;return r.children.map(e=>{if("chunk"===e.type){var i=e.key.id,o=a({highest:r===t,lowest:e.children.some(e=>"leaf"===e.type),attributes:{"data-slate-chunk":!0},children:c.createElement(ec,{root:t,ancestor:e,renderElement:n,renderChunk:a})});return c.createElement(c.Fragment,{key:i},o)}return n(e.node,e.index,e.key)})},ec=c.memo(el,(e,t)=>e.root===t.root&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&!t.root.modifiedChunks.has(t.ancestor)),ed=(0,c.createContext)(null),eu=e=>{var{decorations:t,node:r,renderElement:n,renderChunk:a,renderPlaceholder:i,renderText:o,renderLeaf:s}=e,l=k();h.tw.set(l,!1);var d=!u.ML.isEditor(r)&&u.W_.isElement(r)&&!l.isInline(r)&&u.ML.hasInlines(l,r)?null:l.getChunkSize(r),f=!!d,{decorationsByChild:p,childrenToRedecorate:v}=eh(l,r,t);f||r.children.forEach((e,t)=>{h.l2.set(e,t),h.hf.set(e,r)});var g=(0,c.useCallback)((e,t,r)=>{var d=null!=r?r:y.findKey(l,e);return c.createElement(ed.Provider,{key:"provider-".concat(d.id),value:e},c.createElement(J,{decorations:p[t],element:e,key:d.id,renderElement:n,renderChunk:a,renderPlaceholder:i,renderLeaf:s,renderText:o}))},[l,p,n,a,i,s,o]),m=(e,t)=>{var n=y.findKey(l,e);return c.createElement($,{decorations:p[t],key:n.id,isLast:t===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,renderText:o,text:e})};if(!f)return r.children.map((e,t)=>u.xv.isText(e)?m(e,t):g(e,t));var b=eo(l,r,{reconcile:{chunkSize:d,rerenderChildren:v,onInsert:(e,t)=>{h.l2.set(e,t),h.hf.set(e,r)},onUpdate:(e,t)=>{h.l2.set(e,t),h.hf.set(e,r)},onIndexChange:(e,t)=>{h.l2.set(e,t)}}});return c.createElement(el,{root:b,ancestor:b,renderElement:g,renderChunk:a})},eh=(e,t,r)=>{var n=(0,h.jG)(e,t,r),a=(0,c.useRef)(n).current,i=[];a.length=n.length;for(var o=0;o<n.length;o++){var s,l=n[o],d=null!==(s=a[o])&&void 0!==s?s:null;(0,h._e)(d,l)||(a[o]=l,i.push(o))}return{decorationsByChild:a,childrenToRedecorate:i}},ef=(0,c.createContext)(!1),ep=()=>(0,c.useContext)(ef),ev=(0,c.createContext)({}),eg=()=>{var{addEventListener:e}=(0,c.useContext)(ev),[,t]=(0,c.useReducer)(e=>e+1,0);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");return O(()=>e(t),[e]),k()};new WeakMap;var em=(e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter(t=>(0,h.KW)(e,t,n));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),n())},clear:n}},eb={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class ek extends c.Component{constructor(){super(...arguments),m(this,"context",null),m(this,"manager",null),m(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,eb)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=em(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=a&&a.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(a)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}m(ek,"contextType",b);var ey=h.wZ?ek:e=>{var{children:t}=e;return c.createElement(c.Fragment,null,t)},ew=(0,c.createContext)(!1),eE=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],eC=["text"];function ex(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ex(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ex(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eS=e=>c.createElement(c.Fragment,null,eu(e)),eL=(0,c.forwardRef)((e,t)=>{var r,n,i,s,d=(0,c.useCallback)(e=>c.createElement(eP,eO({},e)),[]),{autoFocus:f,decorate:p=eM,onDOMBeforeInput:g,placeholder:m,readOnly:b=!1,renderElement:w,renderChunk:E,renderLeaf:C,renderText:x,renderPlaceholder:S=d,scrollSelectionIntoView:L=eD,style:P={},as:D="div",disableDefaultStyles:B=!1}=e,T=v(e,eE),R=eg(),[j,I]=(0,c.useState)(!1),F=(0,c.useRef)(null),N=(0,c.useRef)([]),[W,V]=(0,c.useState)(),Y=(0,c.useRef)(!1),{onUserInput:K,receivedUserInput:A}=(r=k(),n=(0,c.useRef)(!1),i=(0,c.useRef)(0),s=(0,c.useCallback)(()=>{if(!n.current){n.current=!0;var e=y.getWindow(r);e.cancelAnimationFrame(i.current),i.current=e.requestAnimationFrame(()=>{n.current=!1})}},[r]),(0,c.useEffect)(()=>()=>cancelAnimationFrame(i.current),[]),{receivedUserInput:n,onUserInput:s}),[,z]=(0,c.useReducer)(e=>e+1,0);h.Tr.set(R,z),h.l.set(R,b);var Z=(0,c.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,c.useEffect)(()=>{F.current&&f&&F.current.focus()},[f]);var _=(0,c.useRef)(),$=(0,c.useMemo)(()=>l()(()=>{if(h.tw.get(R)){$();return}var e=y.toDOMNode(R,R).getRootNode();if(!Y.current&&h.Wt&&e instanceof ShadowRoot){Y.current=!0,(0,h.vY)()?document.execCommand("indent"):u.YR.deselect(R),Y.current=!1;return}var t=_.current;if((h.wZ||!y.isComposing(R))&&(!Z.isUpdatingSelection||null!=t&&t.isFlushing())&&!Z.isDraggingInternally){var r=y.findDocumentOrShadowRoot(R),{activeElement:n}=r,a=y.toDOMNode(R,R),i=(0,h.Mf)(r);if(n===a?(Z.latestElement=n,h.GZ.set(R,!0)):h.GZ.delete(R),!i)return u.YR.deselect(R);var{anchorNode:o,focusNode:s}=i,l=y.hasEditableTarget(R,o)||y.isTargetInsideNonReadonlyVoid(R,o),c=y.hasTarget(R,s);if(l&&c){var d=y.toSlateRange(R,i,{exactMatch:!1,suppressThrow:!0});d&&(y.isComposing(R)||null!=t&&t.hasPendingChanges()||null!=t&&t.isFlushing()?null==t||t.handleUserSelect(d):u.YR.select(R,d))}!b||l&&c||u.YR.deselect(R)}},100),[R,b,Z]),H=(0,c.useMemo)(()=>o()($,0),[$]);_.current=M({node:F,onDOMSelectionChange:$,scheduleOnDOMSelectionChange:H}),O(()=>{F.current&&(r=(0,h.aQ)(F.current))?(h.Gq.set(R,r),h.kB.set(R,F.current),h.BE.set(R,F.current),h.EP.set(F.current,R)):h.BE.delete(R);var e,t,r,{selection:n}=R,a=y.findDocumentOrShadowRoot(R),i=(0,h.Mf)(a);if(!(!i||!y.isFocused(R)||null!==(e=_.current)&&void 0!==e&&e.hasPendingAction())){var o=e=>{var t="None"!==i.type;if(n||t){var r=i.focusNode;if(h.D1&&i.rangeCount>1){var a=i.getRangeAt(0),o=i.getRangeAt(i.rangeCount-1);c=a.startContainer===r?o.endContainer:a.startContainer}else c=i.anchorNode;var s=h.kB.get(R),l=!1;if((0,h.zt)(s,c)&&(0,h.zt)(s,r)&&(l=!0),t&&l&&n&&!e){var c,d,f=y.toSlateRange(R,i,{exactMatch:!0,suppressThrow:!0});if(f&&u.e6.equals(f,n)&&(!Z.hasMarkPlaceholder||null!==(d=c)&&void 0!==d&&null!==(d=d.parentElement)&&void 0!==d&&d.hasAttribute("data-slate-mark-placeholder")))return}if(n&&!y.hasRange(R,n)){R.selection=y.toSlateRange(R,i,{exactMatch:!1,suppressThrow:!0});return}Z.isUpdatingSelection=!0;var p=null;try{p=n&&y.toDOMRange(R,n)}catch(e){}return p?(y.isComposing(R)&&!h.wZ?i.collapseToEnd():u.e6.isBackward(n)?i.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):i.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),L(R,p)):i.removeAllRanges(),p}};i.rangeCount<=1&&o();var s=(null===(t=_.current)||void 0===t?void 0:t.isFlushing())==="action";if(!h.wZ||!s){setTimeout(()=>{Z.isUpdatingSelection=!1});return}var l=null,c=requestAnimationFrame(()=>{if(s){var e=e=>{try{y.toDOMNode(R,R).focus(),o(e)}catch(e){}};e(),l=setTimeout(()=>{e(!0),Z.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(c),l&&clearTimeout(l)}}});var X=(0,c.useCallback)(e=>{ej(R,e);var t=y.toDOMNode(R,R).getRootNode();if(null!=Y&&Y.current&&h.Wt&&t instanceof ShadowRoot){var r=e.getTargetRanges()[0],n=new window.Range;n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset);var a=y.toSlateRange(R,n,{exactMatch:!1,suppressThrow:!1});u.YR.select(R,a),e.preventDefault(),e.stopImmediatePropagation();return}if(K(),!b&&y.hasEditableTarget(R,e.target)&&!eR(e,g)){if(_.current)return _.current.handleDOMBeforeInput(e);H.flush(),$.flush();var{selection:i}=R,{inputType:o}=e,s=e.dataTransfer||e.data||void 0,l="insertCompositionText"===o||"deleteCompositionText"===o;if(l&&y.isComposing(R))return;var c=!1;if("insertText"===o&&i&&u.e6.isCollapsed(i)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==i.anchor.offset&&(c=!0,R.marks&&(c=!1),!h.tw.get(R))){var{anchor:d}=i,[f,p]=y.toDOMPoint(R,d),v=null===(w=f.parentElement)||void 0===w?void 0:w.closest("a"),m=y.getWindow(R);if(c&&v&&y.hasDOMNode(R,v)){var k,w,E,C,x=null==m?void 0:m.document.createTreeWalker(v,NodeFilter.SHOW_TEXT).lastChild();x===f&&(null===(C=x.textContent)||void 0===C?void 0:C.length)===p&&(c=!1)}if(c&&f.parentElement&&(null==m||null===(E=m.getComputedStyle(f.parentElement))||void 0===E?void 0:E.whiteSpace)==="pre"){var O=u.ML.above(R,{at:d.path,match:e=>u.W_.isElement(e)&&u.ML.isBlock(R,e)});O&&u.NB.string(O[0]).includes("	")&&(c=!1)}}if((!o.startsWith("delete")||o.startsWith("deleteBy"))&&!h.tw.get(R)){var[S]=e.getTargetRanges();if(S){var L=y.toSlateRange(R,S,{exactMatch:!1,suppressThrow:!1});if(!i||!u.e6.equals(i,L)){c=!1;var P=!l&&R.selection&&u.ML.rangeRef(R,R.selection);u.YR.select(R,L),P&&h.C_.set(R,P)}}}if(l)return;if(c||e.preventDefault(),i&&u.e6.isExpanded(i)&&o.startsWith("delete")){var M=o.endsWith("Backward")?"backward":"forward";u.ML.deleteFragment(R,{direction:M});return}switch(o){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.ML.deleteFragment(R);break;case"deleteContent":case"deleteContentForward":u.ML.deleteForward(R);break;case"deleteContentBackward":u.ML.deleteBackward(R);break;case"deleteEntireSoftLine":u.ML.deleteBackward(R,{unit:"line"}),u.ML.deleteForward(R,{unit:"line"});break;case"deleteHardLineBackward":u.ML.deleteBackward(R,{unit:"block"});break;case"deleteSoftLineBackward":u.ML.deleteBackward(R,{unit:"line"});break;case"deleteHardLineForward":u.ML.deleteForward(R,{unit:"block"});break;case"deleteSoftLineForward":u.ML.deleteForward(R,{unit:"line"});break;case"deleteWordBackward":u.ML.deleteBackward(R,{unit:"word"});break;case"deleteWordForward":u.ML.deleteForward(R,{unit:"word"});break;case"insertLineBreak":u.ML.insertSoftBreak(R);break;case"insertParagraph":u.ML.insertBreak(R);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===o&&y.isComposing(R)&&(I(!1),h.ES.set(R,!1)),(null==s?void 0:s.constructor.name)==="DataTransfer"?y.insertData(R,s):"string"==typeof s&&(c?N.current.push(()=>u.ML.insertText(R,s)):u.ML.insertText(R,s))}var D=null===(k=h.C_.get(R))||void 0===k?void 0:k.unref();h.C_.delete(R),!D||R.selection&&u.e6.equals(R.selection,D)||u.YR.select(R,D)}},[R,$,K,g,b,H]),G=(0,c.useCallback)(e=>{null==e?($.cancel(),H.cancel(),h.kB.delete(R),h.BE.delete(R),F.current&&h.IB&&F.current.removeEventListener("beforeinput",X)):h.IB&&e.addEventListener("beforeinput",X),F.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[$,H,R,X,t]);O(()=>{var e=y.getWindow(R),t=e=>{var{target:t}=e,r=t instanceof HTMLElement?t:null,n=null==r?void 0:r.tagName;"INPUT"!==n&&"TEXTAREA"!==n&&H()};e.document.addEventListener("selectionchange",t);var r=()=>{Z.isDraggingInternally=!1};return e.document.addEventListener("dragend",r),e.document.addEventListener("drop",r),()=>{e.document.removeEventListener("selectionchange",t),e.document.removeEventListener("dragend",r),e.document.removeEventListener("drop",r)}},[H,Z]);var Q=p([R,[]]),J=q(p),ee=m&&1===R.children.length&&1===Array.from(u.NB.texts(R)).length&&""===u.NB.string(R)&&!j,et=(0,c.useCallback)(e=>{if(e&&ee){var t;V(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else V(void 0)},[ee]);if(ee){var er=u.ML.start(R,[]);Q.push({[h.Ie]:!0,placeholder:m,onPlaceholderResize:et,anchor:er,focus:er})}var{marks:en}=R;if(Z.hasMarkPlaceholder=!1,R.selection&&u.e6.isCollapsed(R.selection)&&en){var{anchor:ea}=R.selection,ei=u.NB.leaf(R,ea.path),eo=v(ei,eC);if(!u.xv.equals(ei,en,{loose:!0})){Z.hasMarkPlaceholder=!0;var es=Object.fromEntries(Object.keys(eo).map(e=>[e,null]));Q.push(eO(eO(eO({[h.q8]:!0},es),en),{},{anchor:ea,focus:ea}))}}return(0,c.useEffect)(()=>{setTimeout(()=>{var{selection:e}=R;if(e){var{anchor:t}=e,r=u.NB.leaf(R,t.path);if(en&&!u.xv.equals(r,en,{loose:!0})){h.Dk.set(R,en);return}}h.Dk.delete(R)})}),!function(){var{flushDeferred:e}=(0,c.useContext)(ev);O(e)}(),c.createElement(ef.Provider,{value:b},c.createElement(ew.Provider,{value:j},c.createElement(U.Provider,{value:J},c.createElement(ey,{node:F,receivedUserInput:A},c.createElement(D,eO(eO({role:b?void 0:"textbox","aria-multiline":!b||void 0,translate:"no"},T),{},{spellCheck:(!!h.IB||!h.TF)&&T.spellCheck,autoCorrect:h.IB||!h.TF?T.autoCorrect:"false",autoCapitalize:h.IB||!h.TF?T.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!b,zindex:-1,suppressContentEditableWarning:!0,ref:G,style:eO(eO({},B?{}:eO({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},W?{minHeight:W}:{})),P),onBeforeInput:(0,c.useCallback)(e=>{if(!h.IB&&!b&&!eB(e,T.onBeforeInput)&&y.hasSelectableTarget(R,e.target)&&(e.preventDefault(),!y.isComposing(R))){var t=e.data;u.ML.insertText(R,t)}},[T.onBeforeInput,R,b]),onInput:(0,c.useCallback)(e=>{if(!eB(e,T.onInput)){if(_.current){_.current.handleInput();return}for(var t of N.current)t();N.current=[],y.isFocused(R)||ej(R,e.nativeEvent)}},[T.onInput,R]),onBlur:(0,c.useCallback)(e=>{if(!(b||Z.isUpdatingSelection||!y.hasSelectableTarget(R,e.target)||eB(e,T.onBlur))){var t=y.findDocumentOrShadowRoot(R);if(Z.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===y.toDOMNode(R,R)||(0,h.aY)(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&(0,h.uF)(r)&&y.hasDOMNode(R,r)){var n=y.toSlateNode(R,r);if(u.W_.isElement(n)&&!R.isVoid(n))return}if(h.Wt){var a=(0,h.Mf)(t);null==a||a.removeAllRanges()}h.GZ.delete(R)}}}},[b,Z.isUpdatingSelection,Z.latestElement,R,T.onBlur]),onClick:(0,c.useCallback)(e=>{if(y.hasTarget(R,e.target)&&!eB(e,T.onClick)&&(0,h.uF)(e.target)){var t=y.toSlateNode(R,e.target),r=y.findPath(R,t);if(u.ML.hasPath(R,r)&&u.NB.get(R,r)===t){if(e.detail===h.n6&&r.length>=1){var n=r;if(!(u.W_.isElement(t)&&u.ML.isBlock(R,t))){var a,i=u.ML.above(R,{match:e=>u.W_.isElement(e)&&u.ML.isBlock(R,e),at:r});n=null!==(a=null==i?void 0:i[1])&&void 0!==a?a:r.slice(0,1)}var o=u.ML.range(R,n);u.YR.select(R,o);return}if(!b){var s=u.ML.start(R,r),l=u.ML.end(R,r),c=u.ML.void(R,{at:s}),d=u.ML.void(R,{at:l});if(c&&d&&u.y$.equals(c[1],d[1])){var f=u.ML.range(R,s);u.YR.select(R,f)}}}}},[R,T.onClick,b]),onCompositionEnd:(0,c.useCallback)(e=>{if(!eT(e)&&y.hasSelectableTarget(R,e.target)){var t;if(y.isComposing(R)&&Promise.resolve().then(()=>{I(!1),h.ES.set(R,!1)}),null===(t=_.current)||void 0===t||t.handleCompositionEnd(e),!eB(e,T.onCompositionEnd)&&!h.wZ&&!h.Wt&&!h.tV&&!h.cj&&!h.rP&&!h.Rx&&e.data){var r=h.Dk.get(R);h.Dk.delete(R),void 0!==r&&(h.BX.set(R,R.marks),R.marks=r),u.ML.insertText(R,e.data);var n=h.BX.get(R);h.BX.delete(R),void 0!==n&&(R.marks=n)}}},[T.onCompositionEnd,R]),onCompositionUpdate:(0,c.useCallback)(e=>{!y.hasSelectableTarget(R,e.target)||eB(e,T.onCompositionUpdate)||eT(e)||y.isComposing(R)||(I(!0),h.ES.set(R,!0))},[T.onCompositionUpdate,R]),onCompositionStart:(0,c.useCallback)(e=>{if(!eT(e)&&y.hasSelectableTarget(R,e.target)&&(null===(t=_.current)||void 0===t||t.handleCompositionStart(e),!eB(e,T.onCompositionStart)&&!h.wZ)){I(!0);var t,{selection:r}=R;if(r&&u.e6.isExpanded(r)){u.ML.deleteFragment(R);return}}},[T.onCompositionStart,R]),onCopy:(0,c.useCallback)(e=>{!y.hasSelectableTarget(R,e.target)||eB(e,T.onCopy)||eT(e)||(e.preventDefault(),y.setFragmentData(R,e.clipboardData,"copy"))},[T.onCopy,R]),onCut:(0,c.useCallback)(e=>{if(!b&&y.hasSelectableTarget(R,e.target)&&!eB(e,T.onCut)&&!eT(e)){e.preventDefault(),y.setFragmentData(R,e.clipboardData,"cut");var{selection:t}=R;if(t){if(u.e6.isExpanded(t))u.ML.deleteFragment(R);else{var r=u.NB.parent(R,t.anchor.path);u.ML.isVoid(R,r)&&u.YR.delete(R)}}}},[b,R,T.onCut]),onDragOver:(0,c.useCallback)(e=>{if(y.hasTarget(R,e.target)&&!eB(e,T.onDragOver)){var t=y.toSlateNode(R,e.target);u.W_.isElement(t)&&u.ML.isVoid(R,t)&&e.preventDefault()}},[T.onDragOver,R]),onDragStart:(0,c.useCallback)(e=>{if(!b&&y.hasTarget(R,e.target)&&!eB(e,T.onDragStart)){var t=y.toSlateNode(R,e.target),r=y.findPath(R,t);if(u.W_.isElement(t)&&u.ML.isVoid(R,t)||u.ML.void(R,{at:r,voids:!0})){var n=u.ML.range(R,r);u.YR.select(R,n)}Z.isDraggingInternally=!0,y.setFragmentData(R,e.dataTransfer,"drag")}},[b,R,T.onDragStart,Z]),onDrop:(0,c.useCallback)(e=>{if(!b&&y.hasTarget(R,e.target)&&!eB(e,T.onDrop)){e.preventDefault();var t=R.selection,r=y.findEventRange(R,e),n=e.dataTransfer;u.YR.select(R,r),Z.isDraggingInternally&&t&&!u.e6.equals(t,r)&&!u.ML.void(R,{at:r,voids:!0})&&u.YR.delete(R,{at:t}),y.insertData(R,n),y.isFocused(R)||y.focus(R)}},[b,R,T.onDrop,Z]),onDragEnd:(0,c.useCallback)(e=>{!b&&Z.isDraggingInternally&&T.onDragEnd&&y.hasTarget(R,e.target)&&T.onDragEnd(e)},[b,Z,T,R]),onFocus:(0,c.useCallback)(e=>{if(!b&&!Z.isUpdatingSelection&&y.hasEditableTarget(R,e.target)&&!eB(e,T.onFocus)){var t=y.toDOMNode(R,R),r=y.findDocumentOrShadowRoot(R);if(Z.latestElement=r.activeElement,h.D1&&e.target!==t){t.focus();return}h.GZ.set(R,!0)}},[b,Z,R,T.onFocus]),onKeyDown:(0,c.useCallback)(e=>{if(!b&&y.hasEditableTarget(R,e.target)){null===(t=_.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(y.isComposing(R)&&!1===r.isComposing&&(h.ES.set(R,!1),I(!1)),!(eB(e,T.onKeyDown)||y.isComposing(R))){var{selection:n}=R,i=R.children[null!==n?n.focus.path[0]:0],o="rtl"===a()(u.NB.string(i));if(h.SV.isRedo(r)){e.preventDefault(),"function"==typeof R.redo&&R.redo();return}if(h.SV.isUndo(r)){e.preventDefault(),"function"==typeof R.undo&&R.undo();return}if(h.SV.isMoveLineBackward(r)){e.preventDefault(),u.YR.move(R,{unit:"line",reverse:!0});return}if(h.SV.isMoveLineForward(r)){e.preventDefault(),u.YR.move(R,{unit:"line"});return}if(h.SV.isExtendLineBackward(r)){e.preventDefault(),u.YR.move(R,{unit:"line",edge:"focus",reverse:!0});return}if(h.SV.isExtendLineForward(r)){e.preventDefault(),u.YR.move(R,{unit:"line",edge:"focus"});return}if(h.SV.isMoveBackward(r)){e.preventDefault(),n&&u.e6.isCollapsed(n)?u.YR.move(R,{reverse:!o}):u.YR.collapse(R,{edge:o?"end":"start"});return}if(h.SV.isMoveForward(r)){e.preventDefault(),n&&u.e6.isCollapsed(n)?u.YR.move(R,{reverse:o}):u.YR.collapse(R,{edge:o?"start":"end"});return}if(h.SV.isMoveWordBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)&&u.YR.collapse(R,{edge:"focus"}),u.YR.move(R,{unit:"word",reverse:!o});return}if(h.SV.isMoveWordForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)&&u.YR.collapse(R,{edge:"focus"}),u.YR.move(R,{unit:"word",reverse:o});return}if(h.IB){if((h.G9||h.Wt)&&n&&(h.SV.isDeleteBackward(r)||h.SV.isDeleteForward(r))&&u.e6.isCollapsed(n)){var s=u.NB.parent(R,n.anchor.path);if(u.W_.isElement(s)&&u.ML.isVoid(R,s)&&(u.ML.isInline(R,s)||u.ML.isBlock(R,s))){e.preventDefault(),u.ML.deleteBackward(R,{unit:"block"});return}}}else{if(h.SV.isBold(r)||h.SV.isItalic(r)||h.SV.isTransposeCharacter(r)){e.preventDefault();return}if(h.SV.isSoftBreak(r)){e.preventDefault(),u.ML.insertSoftBreak(R);return}if(h.SV.isSplitBlock(r)){e.preventDefault(),u.ML.insertBreak(R);return}if(h.SV.isDeleteBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(R,{direction:"backward"}):u.ML.deleteBackward(R);return}if(h.SV.isDeleteForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(R,{direction:"forward"}):u.ML.deleteForward(R);return}if(h.SV.isDeleteLineBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(R,{direction:"backward"}):u.ML.deleteBackward(R,{unit:"line"});return}if(h.SV.isDeleteLineForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(R,{direction:"forward"}):u.ML.deleteForward(R,{unit:"line"});return}if(h.SV.isDeleteWordBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(R,{direction:"backward"}):u.ML.deleteBackward(R,{unit:"word"});return}if(h.SV.isDeleteWordForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(R,{direction:"forward"}):u.ML.deleteForward(R,{unit:"word"});return}}}}},[b,R,T.onKeyDown]),onPaste:(0,c.useCallback)(e=>{!b&&y.hasEditableTarget(R,e.target)&&!eB(e,T.onPaste)&&(!h.IB||(0,h.n)(e.nativeEvent)||h.Wt)&&(e.preventDefault(),y.insertData(R,e.clipboardData))},[b,R,T.onPaste])}),c.createElement(eS,{decorations:Q,node:R,renderElement:w,renderChunk:E,renderPlaceholder:S,renderLeaf:C,renderText:x}))))))}),eP=e=>{var{attributes:t,children:r}=e;return c.createElement("span",eO({},t),r,h.wZ&&c.createElement("br",null))},eM=()=>[],eD=(e,t)=>{var r=!!e.selection&&u.e6.isBackward(e.selection),n=t.cloneRange();if(n.collapse(r),n.getBoundingClientRect){var a=n.startContainer.parentElement,i=n.getBoundingClientRect();if(0===i.width&&0===i.height&&0===i.x&&0===i.y){var o=a.getBoundingClientRect();if(o.width>0||o.height>0)return}a.getBoundingClientRect=n.getBoundingClientRect.bind(n),(0,d.Z)(a,{scrollMode:"if-needed"}),delete a.getBoundingClientRect}},eB=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},eT=e=>(0,h.uF)(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),eR=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},ej=(e,t)=>{if("historyUndo"===t.inputType&&"function"==typeof e.undo){e.undo();return}if("historyRedo"===t.inputType&&"function"==typeof e.redo){e.redo();return}},eI=(0,c.createContext)(!1),eF=parseInt(c.version.split(".")[0],10),eN=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],eW=e=>{var t,r,n,a,i,{editor:o,children:s,onChange:l,onSelectionChange:d,onValueChange:f,initialValue:p}=e,g=v(e,eN);c.useState(()=>{if(!u.NB.isNodeList(p))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(u.o4.stringify(p)));if(!u.ML.isEditor(o))throw Error("[Slate] editor is invalid! You passed: ".concat(u.o4.stringify(o)));o.children=p,Object.assign(o,g)});var{selectorContext:m,onChange:k}=(t=(0,c.useRef)(new Set),r=(0,c.useRef)(new Set),n=(0,c.useCallback)(()=>{t.current.forEach(e=>e())},[]),a=(0,c.useCallback)(()=>{r.current.forEach(e=>e()),r.current.clear()},[]),i=(0,c.useCallback)(function(e){var{deferred:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n?()=>r.current.add(e):e;return t.current.add(a),()=>{t.current.delete(a)}},[]),{selectorContext:(0,c.useMemo)(()=>({addEventListener:i,flushDeferred:a}),[i,a]),onChange:n}),w=(0,c.useCallback)(()=>{l&&l(o.children),d&&o.operations.find(e=>"set_selection"===e.type)&&d(o.selection),f&&o.operations.find(e=>"set_selection"!==e.type)&&f(o.children),k()},[o,k,l,d,f]);(0,c.useEffect)(()=>(h.YU.set(o,w),()=>{h.YU.set(o,()=>{})}),[o,w]);var[E,C]=(0,c.useState)(y.isFocused(o));return(0,c.useEffect)(()=>{C(y.isFocused(o))},[o]),O(()=>{var e=()=>C(y.isFocused(o));return eF>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),c.createElement(ev.Provider,{value:m},c.createElement(b.Provider,{value:o},c.createElement(eI.Provider,{value:E},s)))},eV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{onChange:n,apply:a,insertText:i}=r=(0,h.N3)(r,t);return r.getChunkSize=()=>null,h.wZ&&(r.insertText=(e,t)=>(h.Or.delete(r),i(e,t))),r.onChange=e=>{(eF<18?p.unstable_batchedUpdates:e=>e())(()=>{n(e)})},r.apply=e=>{if("move_node"===e.type){var t=u.NB.parent(r,e.path);if(r.getChunkSize(t)){var n=u.NB.get(r,e.path),i=eo(r,t),o=y.findKey(r,n);i.movedNodeKeys.add(o)}}a(e)},r}}}]);